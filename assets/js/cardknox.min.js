jQuery(function(a){a("form.checkout, form#order_review").on("change",'input[name="wc-cardknox-payment-token"]',function(){"new"===a('.cardknox-legacy-payment-fields input[name="wc-cardknox-payment-token"]:checked').val()?a(".cardknox-legacy-payment-fields #cardknox-payment-data").slideDown(200):a(".cardknox-legacy-payment-fields #cardknox-payment-data").slideUp(200);});var b={init:function(){this.onIfieldloaded();a("form.woocommerce-checkout").length&&(this.form=a("form.woocommerce-checkout"));a("form.woocommerce-checkout").on("checkout_place_order_cardknox",this.onSubmit).on("change",this.reset);a("form#order_review").length&&(this.form=a("form#order_review"));a("form#order_review").on("submit",this.onSubmit);a("form#add_payment_method").length&&(this.form=a("form#add_payment_method"));a("form#add_payment_method").on("submit",this.onSubmit);a(document).on("change","#wc-cardknox-cc-form :input",this.reset).on("cardknoxError",this.onError).on("checkout_error",this.reset);},isCardknoxChosen:function(){return(a("#payment_method_cardknox").is(":checked")&&(!a('input[name="wc-cardknox-payment-token"]:checked').length||"new"===a('input[name="wc-cardknox-payment-token"]:checked').val()));},hasExp:function(){return 0<a("input.xExp").length;},block:function(){b.form.block({message:null,overlayCSS:{background:"#fff",opacity:0.6},});},unblock:function(){b.form.unblock();},onError:function(c,d){console.log("onError");a(".wc-cardknox-error, .xExp").remove();a("#ifieldsError").closest("p").before('<ul class="woocommerce_error woocommerce-error wc-cardknox-error"><li>'+
d+"</li></ul>");b.unblock();},onSubmit:function(c){console.log("onSubmit");return b.isCardknoxChosen()&&!b.hasExp()?(c.preventDefault(),b.block(),getTokens(function(){if(""===document.getElementsByName("xCardNum")[0].value)
return(a(document).trigger("cardknoxError","Card Number Required"),!1);if(""===document.getElementsByName("xCVV")[0].value)
return a(document).trigger("cardknoxError","CVV Required"),!1;console.log("Success");b.onCardknoxResponse();},function(){console.log("error");a(document).trigger("cardknoxError",document.getElementById("ifieldsError").textContent);return!1;},3e4),!1):!0;},onCardknoxResponse:function(){var c=document.getElementById("cardknox-card-expiry").value.replace(/\s|\//g,"");if(4!=c.length)
return(a(document).trigger("cardknoxError","Invalid expiration date"),!1);console.log("onCardknoxResponse");b.form.append("<input type='hidden' class='xExp' name='xExp' value='"+c+"'/>");b.form.submit();},reset:function(){a("#cardknox-card-cvc, #cardknox-card-number").val("");a(".xExp").remove();},onIfieldloaded:function(){enableLogging();enableAutoFormatting("-");setAccount(wc_cardknox_params.key,"wordpress","0.1.2");setIfieldStyle("card-number",{outline:"none",border:"0","border-left-color":"rgb(67, 69, 75)",padding:"0.6180469716em",width:"225px",height:"auto","background-color":wc_cardknox_params.bgcolor,"font-weight":"inherit",});setIfieldStyle("cvv",{outline:"none",border:"0","border-left-color":"rgb(67, 69, 75)",padding:"0.6180469716em",width:"106px",height:"auto","background-color":wc_cardknox_params.bgcolor,"font-weight":"inherit",});},};b.init();});

jQuery(document).ready(function() {
    // Listen for the 'updated_checkout' event triggered by WooCommerce
    jQuery(document.body).on('updated_checkout', function() {
      
    jQuery("#ap-container").hide();
        var paymentMethodSelect = 'input[name="payment_method"]'; // Replace with your payment method selector
        var placeOrderButton = 'button[name="woocommerce_checkout_place_order"]'; // Replace with your "Place Order" button selector
        
        // Initial check on page load
        hidePlaceOrderButton();
    
        // Check on payment method change
        jQuery(document).on('change', paymentMethodSelect, function(){
            hidePlaceOrderButton();
        });
            
        // Function to hide/show "Place Order" button
        function hidePlaceOrderButton() {
            var selectedPaymentMethod = jQuery(paymentMethodSelect + ':checked').val();
    
            if (selectedPaymentMethod === 'cardknox-applepay') { // Replace 'your_payment_method_slug' with your payment method value
                jQuery(placeOrderButton).hide();
                jQuery("#ap-container").show();
                jQuery(".applepay-error").show();
            } else {
                jQuery(placeOrderButton).show();
                jQuery("#ap-container").hide();
                jQuery(".applepay-error").hide();
            }
        }

    });
});