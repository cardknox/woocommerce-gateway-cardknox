{"version":3,"file":"index.js","mappings":"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","sources":["webpack://wc-cardknox-blocks/./src/cardknox-applepay-method.js","webpack://wc-cardknox-blocks/./src/cardknox-payment-method.js","webpack://wc-cardknox-blocks/./src/components/ApplePayButton.js","webpack://wc-cardknox-blocks/./src/components/CardknoxIFields.js","webpack://wc-cardknox-blocks/./src/components/CardknoxPaymentForm.js","webpack://wc-cardknox-blocks/./src/components/SavePaymentCheckbox.js","webpack://wc-cardknox-blocks/./src/hooks/useCardknoxIFields.js","webpack://wc-cardknox-blocks/./src/utils/cardknox-validator.js","webpack://wc-cardknox-blocks/./src/utils/constants.js","webpack://wc-cardknox-blocks/external window [\"wp\",\"element\"]","webpack://wc-cardknox-blocks/external window [\"wp\",\"htmlEntities\"]","webpack://wc-cardknox-blocks/external window [\"wp\",\"i18n\"]","webpack://wc-cardknox-blocks/external window \"React\"","webpack://wc-cardknox-blocks/webpack/bootstrap","webpack://wc-cardknox-blocks/webpack/runtime/compat get default export","webpack://wc-cardknox-blocks/webpack/runtime/define property getters","webpack://wc-cardknox-blocks/webpack/runtime/hasOwnProperty shorthand","webpack://wc-cardknox-blocks/webpack/runtime/make namespace object","webpack://wc-cardknox-blocks/./src/index.js"],"sourcesContent":["/* global ApplePaySession, WCCardknoxApplePayBlocks */\nimport ApplePayButton from './components/ApplePayButton';\nimport { createElement } from '@wordpress/element';\n\nconst settings = window.WCCardknoxApplePayBlocks || {};\nconst merchantId =\n\tsettings.merchantId ||\n\tsettings.merchant_identifier ||\n\tsettings.merchantIdentifier ||\n\t'';\n\n// basic availability checks; keeps the radio hidden on unsupported browsers\nfunction supportsApplePaySync() {\n\ttry {\n\t\treturn !!(window.ApplePaySession && ApplePaySession.canMakePayments());\n\t} catch (e) {\n\t\treturn false;\n\t}\n}\nasync function canMakeApplePay() {\n\tconst isSecure =\n\t\t(typeof window !== 'undefined' && window.isSecureContext === true) ||\n\t\t(typeof location !== 'undefined' && location.protocol === 'https:');\n\n\tif (!merchantId || !isSecure) return false;\n\tif (!supportsApplePaySync()) return false;\n\n\t// Prefer strict Safari check when available\n\tif (typeof ApplePaySession?.canMakePaymentsWithActiveCard === 'function') {\n\t\ttry {\n\t\t\treturn await ApplePaySession.canMakePaymentsWithActiveCard(merchantId);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\ttry {\n\t\treturn ApplePaySession.canMakePayments();\n\t} catch (e) {\n\t\treturn false;\n\t}\n}\n\nconst CardknoxApplePayMethod = {\n\t// MUST match your gateway id and PHP Blocks class\n\tname: 'cardknox-applepay',\n\tlabel: 'Apple Pay',\n\tariaLabel: 'Apple Pay',\n\n\t// React elements (not functions)\n\tcontent: createElement(ApplePayButton, { settings }),\n\tedit: createElement(ApplePayButton, { settings, isEditor: true }),\n\n\t// Async is supported by Blocks; will hide radio when Apple Pay isnâ€™t available\n\tcanMakePayment: () => canMakeApplePay(),\n\n\tsupports: { features: ['products'] },\n};\n\nexport default CardknoxApplePayMethod;","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { createElement } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport CardknoxPaymentForm from './components/CardknoxPaymentForm';\nimport { PAYMENT_METHOD_NAME } from './utils/constants';\n\n// Get settings from global WC object\nconst getSettings = () => {\n    if (window.wc && window.wc.wcSettings) {\n        return window.wc.wcSettings.getSetting('cardknox_data', {});\n    }\n    // Fallback to checking wcSettings global\n    if (window.wcSettings) {\n        return window.wcSettings.getSetting('cardknox_data', {});\n    }\n    return {};\n};\n\nconst settings = getSettings();\n\nconst defaultLabel = __('Credit Card (Cardknox)', 'woocommerce-gateway-cardknox');\nconst label = decodeEntities(settings.title) || defaultLabel;\n\n/**\n * Content component wrapper\n */\nconst Content = (props) => createElement(CardknoxPaymentForm, props);\n\n/**\n * Label component\n */\nconst Label = () => createElement('span', null, label);\n\n/**\n * Cardknox payment method configuration\n */\nconst CardknoxPaymentMethod = {\n    name: PAYMENT_METHOD_NAME,\n    label: createElement(Label),\n    content: createElement(Content),\n    edit: createElement(Content),\n    canMakePayment: () => true,\n    ariaLabel: label,\n    supports: {\n        features: settings.supports ?? ['products'],\n        showSaveOption: settings.showSaveOption ?? false,\n        showSavedCards: Array.isArray(settings.savedCards) && settings.savedCards.length > 0,\n    },\n    placeOrderButtonLabel: __('Place Order', 'woocommerce-gateway-cardknox'),\n};\n\nexport default CardknoxPaymentMethod;","// blocks/src/components/ApplePayButton.js\nimport { useEffect } from '@wordpress/element';\n\nconst ApplePayButton = ({ isEditor }) => {\n\t// Render the same markup your classic gateway outputs,\n\t// so your existing minified script can hook into it.\n\tuseEffect(() => {\n\t\t// Re-trigger WC's updated_checkout so your classic JS initializes inside Blocks\n\t\tif (window.jQuery && !isEditor) {\n\t\t\twindow.jQuery(document.body).trigger('updated_checkout');\n\t\t}\n\t}, [isEditor]);\n\n\treturn (\n\t\t<>\n\t\t\t<div id=\"ap-container\" className=\"ap hidden\" style={{ minHeight: '55px' }} />\n\t\t\t<br />\n\t\t\t<div className=\"messages\">\n\t\t\t\t<div className=\"message message-error error applepay-error\" style={{ display: 'none' }} />\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default ApplePayButton;","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useEffect } from '@wordpress/element';\n\nconst cardLogoUrl = 'https://plugin.cardknox.net/demo/wpdemo/wp-content/plugins/woocommerce-gateway-cardknox/images/card-logos.png';\n\nconst CardknoxIFields = ({ errors, onExpiryChange, ValidationInputError, cardData }) => {\n    \n\n    const validateExpiry = () => {\n\n        if (!cardData.expiryMonth || !cardData.expiryYear) {\n            return false;\n        }\n\n        const currentDate = new Date();\n        const currentYear = currentDate.getFullYear();\n        const currentMonth = currentDate.getMonth() + 1;\n        const expMonth = parseInt(cardData.expiryMonth, 10);\n        const expYear = parseInt(cardData.expiryYear, 10);\n\n        if (expYear < currentYear || (expYear === currentYear && expMonth < currentMonth)) {\n            return false;\n        }\n\n        return true;\n    };\n\n    // Ensure no container borders; styling is inside iField\n    useEffect(() => {\n        const cardContainer = document.querySelector('.cardknox-iframe-container');\n        const cvvContainer = document.querySelector('.cvv-container');\n        if (cardContainer) cardContainer.style.border = '0';\n        if (cvvContainer) cvvContainer.style.border = '0';\n        \n    }, []);\n\n    return (\n        <div className=\"wc-cardknox-ifields credit-row\">\n            <div id=\"ifieldsError\" style={{ display: 'none', color: 'red', marginBottom: '10px' }}></div>\n\n            <div className=\"form-row form-row-wide\" style={{ paddingBottom: '0', margin: '0 0 15px 0', width: '100%' }}>\n                <label style={{ margin: '0 0 5px 0', lineHeight: 'inherit', display: 'block', fontWeight: 400 }} htmlFor=\"cardknox-card-number\">\n                    {__('Card Number', 'woocommerce-gateway-cardknox')} <span className=\"required\">*</span>\n                </label>\n\n                <div className=\"cardknox-card-number-wrapper\" style={{ position: 'relative' }}>\n                    <div className=\"cardknox-iframe-container\" style={{ position: 'relative', overflow: 'hidden', backgroundColor: '#fff', height: '65px' }}>\n                        <iframe\n                            data-ifields-id=\"card-number\"\n                            data-ifields-placeholder={__('Card Number', 'woocommerce-gateway-cardknox')}\n                            src=\"https://cdn.cardknox.com/ifields/3.1.2508.1401/ifield.htm\"\n                            frameBorder=\"0\"\n                            width=\"100%\"\n                            height=\"100%\"\n                            style={{ border: 0 }}\n                            title=\"Card Number\"\n                        ></iframe>\n                    </div>\n\n                    <div\n                        className=\"card-logos\"\n                        style={{\n                            position: 'absolute',\n                            right: '50px',\n                            top: '40%',\n                            transform: 'translateY(-50%)',\n                            height: '40px',\n                            width: '100%',\n                            backgroundImage: `url(${cardLogoUrl})`,\n                            backgroundSize: 'auto',\n                            backgroundRepeat: 'no-repeat',\n                            backgroundPosition: 'center right',\n                            pointerEvents: 'none',\n                        }}\n                    />\n                </div>\n\n                <div className=\"cardknox-error-container\">\n                    {/* Container used by the SDK + React error fallback */}\n                    <div data-ifields-id=\"card-number-error\"></div>\n                    {errors.cardNumber && <ValidationInputError errorMessage={errors.cardNumber} />}\n                </div>\n            </div>\n\n            <div className=\"cardknox-row\" style={{ display: 'flex', gap: '15px', marginBottom: '0px' }}>\n                <div className=\"form-row form-row-first\" style={{ flex: '1', margin: '0' }}>\n                    <label style={{ margin: '0 0 5px 0', lineHeight: 'inherit', display: 'block', fontWeight: 400 }} htmlFor=\"cardknox-expiry\">\n                        {__('Expiry (MM/YY)', 'woocommerce-gateway-cardknox')} <span className=\"required\">*</span>\n                    </label>\n                    <input\n                        id=\"cardknox-card-expiry\"\n                        className=\"input-text wc-credit-card-form-card-expiry\"\n                        inputMode=\"numeric\"\n                        autoComplete=\"cc-exp\"\n                        autoCorrect=\"no\"\n                        autoCapitalize=\"no\"\n                        spellCheck=\"no\"\n                        type=\"tel\"\n                        placeholder={__('MM / YY', 'woocommerce-gateway-cardknox')}\n                        style={{\n                            outline: 'none',\n                            border:\n                                errors.expiry || (!validateExpiry() && cardData.expiryMonth && cardData.expiryYear)\n                                    ? '1px solid red'\n                                    : '1px solid #000',\n                            borderRadius: '4px',\n                            padding: '0.618047em',\n                            width: '100%',\n                            height: '48px',\n                            backgroundColor: '#fff',\n                            fontWeight: 'inherit',\n                            boxSizing: 'border-box',\n                            fontSize: '16px',\n                        }}\n                        onChange={(e) => {\n                            const value = e.target.value.replace(/\\D/g, '');\n                            let formattedValue = value;\n\n                            if (value.length >= 2) {\n                                formattedValue = value.substr(0, 2) + ' / ' + value.substr(2, 2);\n                            }\n\n                            e.target.value = formattedValue;\n\n                            if (value.length >= 2) {\n                                const month = value.substr(0, 2);\n                                onExpiryChange('expiryMonth', month);\n                            }\n\n                            if (value.length === 4) {\n                                const year = '20' + value.substr(2, 2);\n                                onExpiryChange('expiryYear', year);\n                            }\n                        }}\n                    />\n                    {(errors.expiry || (!validateExpiry() && cardData.expiryMonth && cardData.expiryYear)) && (\n                        <ValidationInputError errorMessage={errors.expiry || __('Expiration must be in the future', 'woocommerce-gateway-cardknox')} />\n                    )}\n                </div>\n\n                <div className=\"form-row form-row-last\" style={{ flex: '1', margin: '0' }}>\n                    <label style={{ margin: '0 0 5px 0', lineHeight: 'inherit', display: 'block', fontWeight: 400 }} htmlFor=\"cardknox-cvv\">\n                        {__('CVV Code', 'woocommerce-gateway-cardknox')} <span className=\"required\">*</span>\n                    </label>\n                    <div className=\"cardknox-iframe-container cvv-container\" style={{ position: 'relative', overflow: 'hidden', backgroundColor: '#fff', height: '65px' }}>\n                        <iframe\n                            data-ifields-id=\"cvv\"\n                            data-ifields-placeholder={__('CVV', 'woocommerce-gateway-cardknox')}\n                            src=\"https://cdn.cardknox.com/ifields/3.1.2508.1401/ifield.htm\"\n                            frameBorder=\"0\"\n                            width=\"100%\"\n                            height=\"100%\"\n                            style={{ border: 0 }}\n                            title=\"CVV\"\n                        ></iframe>\n                    </div>\n                    <div data-ifields-id=\"cvv-error\"></div>\n                    {errors.cvv && <ValidationInputError errorMessage={errors.cvv} />}\n                </div>\n            </div>\n\n            {/* Hidden fields for tokens */}\n            <input type=\"hidden\" data-ifields-id=\"card-number-token\" name=\"xCardNum\" />\n            <input type=\"hidden\" data-ifields-id=\"cvv-token\" name=\"xCVV\" />\n\n            <div className=\"clear\"></div>\n        </div>\n    );\n};\n\nexport default CardknoxIFields;","/**\n * External dependencies\n */\nimport { useState, useEffect, useCallback, useRef } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport CardknoxIFields from './CardknoxIFields';\nimport SavePaymentCheckbox from './SavePaymentCheckbox';\nimport useCardknoxIFields from '../hooks/useCardknoxIFields';\nimport { validateCardData } from '../utils/cardknox-validator';\n\n// Get settings helper\nconst getSettings = () => {\n    if (window.wc && window.wc.wcSettings) {\n        return window.wc.wcSettings.getSetting('cardknox_data', {});\n    }\n    if (window.wcSettings) {\n        return window.wcSettings.getSetting('cardknox_data', {});\n    }\n    return {};\n};\n\nconst CardknoxPaymentForm = (props) => {\n    // Handle both possible prop structures\n    const eventRegistration = props.eventRegistration || props.events;\n    const emitResponse = props.emitResponse;\n    const components = props.components || {};\n    \n    const settings = getSettings();\n    const [errors, setErrors] = useState({});\n    const [isValid, setIsValid] = useState(false);\n    const [saveCard, setSaveCard] = useState(false);\n    const [selectedToken, setSelectedToken] = useState('new');\n    const [cardData, setCardData] = useState({\n        cardNumber: '',\n        cvv: '',\n        expiryMonth: '',\n        expiryYear: '',\n        cardNumberToken: '',\n        cvvToken: '',\n    });\n\n    // Debug refs\n    const renderCountRef = useRef(0);\n    const prevGetTokensRef = useRef(null);\n    const prevCardDataRef = useRef(cardData);\n\n    // Latest refs to avoid re-subscribing payment handler on every render\n    const emitResponseRef = useRef(emitResponse);\n    const getTokensRef = useRef(null);\n    const cardDataRef = useRef(cardData);\n    const saveCardRef = useRef(saveCard);\n    const selectedTokenRef = useRef(selectedToken);\n    const errorsRef = useRef(errors);\n    const eventRegistrationRef = useRef(eventRegistration);\n    const paymentSubscriptionRef = useRef({ subscribed: false, unsubscribe: null });\n\n    // Log every render (throttled)\n    useEffect(() => {\n        renderCountRef.current += 1;\n    });\n\n    const {\n        initializeIFields,\n        getTokens,\n        clearFields,\n        focusField,\n    } = useCardknoxIFields();\n\n    // Keep latest values in refs\n    useEffect(() => { emitResponseRef.current = emitResponse; }, [emitResponse]);\n    useEffect(() => { getTokensRef.current = getTokens; }, [getTokens]);\n    useEffect(() => { cardDataRef.current = cardData; }, [cardData]);\n    useEffect(() => { saveCardRef.current = saveCard; }, [saveCard]);\n    useEffect(() => { selectedTokenRef.current = selectedToken; }, [selectedToken]);\n    useEffect(() => { errorsRef.current = errors; }, [errors]);\n    useEffect(() => { eventRegistrationRef.current = eventRegistration; }, [eventRegistration]);\n\n    // Log getTokens identity stability\n    useEffect(() => {\n        const changed = prevGetTokensRef.current !== getTokens;\n        prevGetTokensRef.current = getTokens;\n    }, [getTokens]);\n\n    // Log cardData ref stability\n    useEffect(() => {\n        const sameRef = prevCardDataRef.current === cardData;\n        prevCardDataRef.current = cardData;\n    }, [cardData]);\n\n    // Get ValidationInputError component or create a fallback\n    const ValidationInputError = components.ValidationInputError || \n        (({ errorMessage }) => {\n            if (!errorMessage) return null;\n            return <div className=\"wc-block-components-validation-error\" role=\"alert\">\n                <span>{errorMessage}</span>\n            </div>;\n        });\n\n    useEffect(() => {\n        // Initialize iFields when component mounts\n        const attemptInit = () => {\n            const hasKey = !!settings.iFieldsKey;\n            const hasSDK = !!window.setAccount && !!window.setIfieldStyle && !!window.addIfieldCallback;\n\n            if (hasKey && hasSDK) {\n                initializeIFields({\n                    iFieldsKey: settings.iFieldsKey,\n                    softwareName: settings.softwareName || 'WooCommerce',\n                    softwareVersion: settings.softwareVersion || '1.0.0',\n                    onUpdate: handleIFieldUpdate,\n                });\n            }\n        };\n\n        attemptInit();\n        // As the SDK may be enqueued separately, re-attempt after a short delay\n        const t = window.setTimeout(attemptInit, 300);\n        return () => {\n            window.clearTimeout(t);\n        };\n    }, [settings.iFieldsKey]);\n\n    // Subscribe once on mount; retry briefly until registration becomes available\n    useEffect(() => {\n        let isUnmounted = false;\n        let timeoutId = null;\n\n        const trySubscribe = () => {\n            if (isUnmounted || paymentSubscriptionRef.current.subscribed) {\n                return;\n            }\n\n            const registration = eventRegistrationRef.current;\n            const onSetup = registration?.onPaymentSetup;\n            const onProcessing = registration?.onPaymentProcessing;\n            const paymentEvent = onSetup || onProcessing;\n\n            if (!paymentEvent || !emitResponseRef.current) {\n                // retry shortly until available\n                timeoutId = window.setTimeout(trySubscribe, 200);\n                return;\n            }\n\n            const unsubscribe = paymentEvent(async () => {\n                const emitRes = emitResponseRef.current;\n                const selected = selectedTokenRef.current;\n                const card = cardDataRef.current;\n\n                try {\n                    // If using a saved token, we're done\n                    if (selected !== 'new') {\n                        return {\n                            type: emitRes.responseTypes.SUCCESS,\n                            meta: { paymentMethodData: { wc_token: selected } },\n                        };\n                    }\n\n                    // Validate only expiry here; let iFields handle number + cvv\n                    const validationErrors = validateCardData(card) || {};\n                    if (card.expiryMonth && card.expiryYear) {\n                        const currentDate = new Date();\n                        const currentYear = currentDate.getFullYear();\n                        const currentMonth = currentDate.getMonth() + 1;\n                        const expMonth = parseInt(card.expiryMonth, 10);\n                        const expYear = parseInt(card.expiryYear, 10);\n                        if (expYear < currentYear || (expYear === currentYear && expMonth < currentMonth)) {\n                            validationErrors.expiry = __('Expiration must be in the future', 'woocommerce-gateway-cardknox');\n                        }\n                    } else {\n                        validationErrors.expiry = __('Expiry date is required', 'woocommerce-gateway-cardknox');\n                    }\n\n                    if (Object.keys(validationErrors).length > 0) {\n                        setErrors(validationErrors);\n                        return {\n                            type: emitRes.responseTypes.ERROR,\n                            message: __('Please check your card details.', 'woocommerce-gateway-cardknox'),\n                        };\n                    }\n\n                    // Clear any component-side errors before tokenizing\n                    setErrors({});\n\n                    // Request tokens (this will also set/clear inline errors + focus invalid fields)\n                    const tokens = await getTokensRef.current();\n\n                    if (!tokens?.cardNumberToken || !tokens?.cvvToken) {\n                        return {\n                            type: emitRes.responseTypes.ERROR,\n                            message: __('Unable to process card data. Please try again.', 'woocommerce-gateway-cardknox'),\n                        };\n                    }\n\n                    return {\n                        type: emitRes.responseTypes.SUCCESS,\n                        meta: {\n                            paymentMethodData: {\n                                cardknox_card_token: tokens.cardNumberToken,\n                                cardknox_cvv_token: tokens.cvvToken,\n                                cardknox_exp_month: card.expiryMonth,\n                                cardknox_exp_year: card.expiryYear,\n                                cardknox_save_card: saveCardRef.current ? 'yes' : 'no',\n                                'wc-cardknox-new-payment-method': saveCardRef.current ? '1' : '',\n                            },\n                        },\n                    };\n                } catch (error) {\n                    return {\n                        type: emitRes.responseTypes.ERROR,\n                        message: error?.message || __('Payment processing failed.', 'woocommerce-gateway-cardknox'),\n                    };\n                }\n            });\n\n            paymentSubscriptionRef.current = { subscribed: true, unsubscribe };\n        };\n\n        trySubscribe();\n\n        return () => {\n            isUnmounted = true;\n            if (timeoutId) {\n                window.clearTimeout(timeoutId);\n            }\n            const { unsubscribe } = paymentSubscriptionRef.current || {};\n            if (typeof unsubscribe === 'function') {\n                unsubscribe();\n            }\n        };\n    }, []);\n\n    const handleIFieldUpdate = useCallback((data) => {\n        // Update validation state based on iField data\n        const newErrors = { ...errors };\n\n        // Check if tokens exist first\n        const cardNumberToken = document.querySelector('[data-ifields-id=\"card-number-token\"]')?.value;\n        const cvvToken = document.querySelector('[data-ifields-id=\"cvv-token\"]')?.value;\n\n        if (data.lastActiveField === 'card-number' || data.cardNumberLength !== undefined) {\n            if (cardNumberToken || data.cardNumberIsValid) {\n                delete newErrors.cardNumber;\n            } else if (data.cardNumberLength > 0 && !data.cardNumberIsValid) {\n                newErrors.cardNumber = __('Invalid card number', 'woocommerce-gateway-cardknox');\n            } else {\n                delete newErrors.cardNumber;\n            }\n        }\n\n        if (data.lastActiveField === 'cvv' || data.cvvLength !== undefined) {\n            if (cvvToken || data.cvvIsValid) {\n                delete newErrors.cvv;\n            } else if (data.cvvLength > 0 && !data.cvvIsValid) {\n                newErrors.cvv = __('Invalid CVV', 'woocommerce-gateway-cardknox');\n            } else {\n                delete newErrors.cvv;\n            }\n        }\n\n        setErrors(newErrors);\n        const cardNumberValid = !!(cardNumberToken || data.cardNumberIsValid);\n        const cvvValid = !!(cvvToken || data.cvvIsValid);\n        setIsValid(cardNumberValid && cvvValid);\n\n        // Containers must not draw borders now; iField content handles it. Clear any container borders.\n        const cardContainer = document.querySelector('.cardknox-iframe-container');\n        const cvvContainer = document.querySelector('.cvv-container');\n        if (cardContainer) cardContainer.style.border = '0';\n        if (cvvContainer) cvvContainer.style.border = '0';\n    }, [errors]);\n\n    const handleExpiryChange = (field, value) => {\n        setCardData(prev => ({\n            ...prev,\n            [field]: value,\n        }));\n        \n        // Clear expiry errors\n        const newErrors = { ...errors };\n        delete newErrors.expiry;\n        setErrors(newErrors);\n    };\n\n    const handleTokenChange = (token) => {\n        setSelectedToken(token);\n        if (token !== 'new') {\n            clearFields();\n        }\n    };\n\n    return (\n        <div className=\"wc-cardknox-payment-form\">\n            {selectedToken === 'new' && (\n                <>\n                    <CardknoxIFields\n                        errors={errors}\n                        onExpiryChange={handleExpiryChange}\n                        ValidationInputError={ValidationInputError}\n                        cardData={cardData}\n                    />\n\n                    {settings.showSaveOption && (\n                        <SavePaymentCheckbox\n                            checked={saveCard}\n                            onChange={setSaveCard}\n                        />\n                    )}\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default CardknoxPaymentForm;\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nconst SavePaymentCheckbox = ({ checked, onChange }) => {\n    return (\n        <div className=\"wc-payment-gateway-cardknox__save-payment-method wc-block-components-payment-methods__save-card-info\">\n            <label className=\"wc-block-components-checkbox wc-block-components-payment-methods__save-card-infos-checkbox\">\n                <input\n                    type=\"checkbox\"\n                    name=\"wc-cardknox-new-payment-method\"\n                    id=\"wc-cardknox-new-payment-method\"\n                    className=\"wc-block-components-checkbox__input\"\n                    checked={checked}\n                    onChange={(e) => onChange(e.target.checked)}\n                />\n                <svg className=\"wc-block-components-checkbox__mark\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 20\">\n                    <path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\" />\n                </svg>\n                <span className=\"wc-block-components-checkbox__label\">\n                    {__('Save payment information to my account for future purchases.', 'woocommerce-gateway-cardknox')}\n                </span>\n            </label>\n        </div>\n    );\n};\n\nexport default SavePaymentCheckbox;","import { useCallback, useRef } from '@wordpress/element';\n\nconst useCardknoxIFields = () => {\n\tconst isInitializedRef = useRef(false);\n\tconst updateCallbackRef = useRef(null);\n\n\t// Clears WooCommerce checkout banners that sometimes stick around\n\tconst clearWooNotices = () => {\n\t\tconst groups = document.querySelectorAll(\n\t\t\t'.woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message'\n\t\t);\n\t\tgroups.forEach((g) => g.remove());\n\t};\n\n\tconst initializeIFields = useCallback(\n\t\t({\n\t\t\tiFieldsKey,\n\t\t\tsoftwareName,\n\t\t\tsoftwareVersion,\n\t\t\tonUpdate, // (optional) last iFields state callback\n\t\t}) => {\n\t\t\tif (isInitializedRef.current) return;\n\t\t\tif (!window.setAccount) return;\n\n\t\t\tupdateCallbackRef.current = onUpdate || null;\n\n\t\t\t// Init account\n\t\t\twindow.setAccount(iFieldsKey, softwareName, softwareVersion);\n\n\t\t\t// Base styles INSIDE iframes (the iField itself)\n\t\t\tconst defaultStyle = {\n\t\t\t\toutline: 'none',\n\t\t\t\tborder: '1px solid #c3c3c3',\n\t\t\t\t'border-radius': '4px',\n\t\t\t\tpadding: '0.6180469716em',\n\t\t\t\twidth: '93%',\n\t\t\t\theight: '30px',\n\t\t\t\t'background-color': 'transparent',\n\t\t\t\t'font-weight': 'inherit',\n\t\t\t\t'box-shadow': 'none',\n\t\t\t\t'font-size': '16px',\n\t\t\t\t'font-family':\n\t\t\t\t\t'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n\t\t\t};\n\n\t\t\tconst defaultStyleCvv = {\n\t\t\t\toutline: 'none',\n\t\t\t\tborder: '1px solid #c3c3c3',\n\t\t\t\t'border-radius': '4px',\n\t\t\t\tpadding: '0.6180469716em',\n\t\t\t\twidth: '86%',\n\t\t\t\theight: '28px',\n\t\t\t\t'background-color': 'transparent',\n\t\t\t\t'font-weight': 'inherit',\n\t\t\t\t'box-shadow': 'none',\n\t\t\t\t'font-size': '16px',\n\t\t\t\t'font-family':\n\t\t\t\t\t'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n\t\t\t};\n\n\t\t\tconst validStyle = {\n\t\t\t\t...defaultStyle,\n\t\t\t\tborder: '1px solid #46b450',\n\t\t\t\t'background-color': '#f0f9f0',\n\t\t\t};\n\t\t\tconst invalidStyle = {\n\t\t\t\t...defaultStyle,\n\t\t\t\tborder: '1px solid #d63638',\n\t\t\t\t'background-color': '#fef5f5',\n\t\t\t};\n\t\t\tconst validStyleCvv = {\n\t\t\t\t...defaultStyleCvv,\n\t\t\t\tborder: '1px solid #46b450',\n\t\t\t\t'background-color': '#f0f9f0',\n\t\t\t};\n\t\t\tconst invalidStyleCvv = {\n\t\t\t\t...defaultStyleCvv,\n\t\t\t\tborder: '1px solid #d63638',\n\t\t\t\t'background-color': '#fef5f5',\n\t\t\t};\n\n\t\t\t// Set initial styles\n\t\t\tif (window.setIfieldStyle) {\n\t\t\t\twindow.setIfieldStyle('card-number', defaultStyle);\n\t\t\t\twindow.setIfieldStyle('cvv', defaultStyleCvv);\n\t\t\t}\n\n\t\t\t// Input formatting & ENTER support\n\t\t\twindow.enableAutoFormatting && window.enableAutoFormatting();\n\t\t\tif (window.enableEnterKey) {\n\t\t\t\twindow.enableEnterKey('card-number');\n\t\t\t\twindow.enableEnterKey('cvv');\n\t\t\t}\n\n\t\t\t// Modern callback -> fires on every keystroke with rich data\n\t\t\tif (window.addIfieldCallback && window.setIfieldStyle) {\n\t\t\t\twindow.addIfieldCallback('input', function (data) {\n\t\t\t\t\tupdateCallbackRef.current?.(data);\n\n\t\t\t\t\t// DOM nodes for inline errors (make sure these exist in your markup)\n\t\t\t\t\tconst cardNumberError = document.querySelector(\n\t\t\t\t\t\t'[data-ifields-id=\"card-number-error\"]'\n\t\t\t\t\t);\n\t\t\t\t\tconst cvvError = document.querySelector('[data-ifields-id=\"cvv-error\"]');\n\n\t\t\t\t\tconst cardLen =\n\t\t\t\t\t\ttypeof data.cardNumberLength === 'number' ? data.cardNumberLength : 0;\n\t\t\t\t\tconst cvvLen =\n\t\t\t\t\t\ttypeof data.cvvLength === 'number' ? data.cvvLength : 0;\n\n\t\t\t\t\t// Card Number visuals + message\n\t\t\t\t\twindow.setIfieldStyle(\n\t\t\t\t\t\t'card-number',\n\t\t\t\t\t\tcardLen <= 0\n\t\t\t\t\t\t\t? defaultStyle\n\t\t\t\t\t\t\t: data.cardNumberIsValid\n\t\t\t\t\t\t\t? validStyle\n\t\t\t\t\t\t\t: invalidStyle\n\t\t\t\t\t);\n\n\t\t\t\t\tif (cardNumberError) {\n\t\t\t\t\t\tcardNumberError.textContent =\n\t\t\t\t\t\t\tcardLen <= 0\n\t\t\t\t\t\t\t\t? 'Card Number is required'\n\t\t\t\t\t\t\t\t: data.cardNumberIsValid\n\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t: 'Invalid card number';\n\t\t\t\t\t\tcardNumberError.setAttribute(\n\t\t\t\t\t\t\t'aria-hidden',\n\t\t\t\t\t\t\tcardNumberError.textContent ? 'false' : 'true'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t// CVV visuals + message (depends on issuer)\n\t\t\t\t\tconst amex = data.issuer === 'amex';\n\t\t\t\t\tconst expectedLen = amex ? 4 : 3;\n\t\t\t\t\tconst cvvLooksValid = cvvLen === expectedLen && data.cvvIsValid;\n\n\t\t\t\t\twindow.setIfieldStyle(\n\t\t\t\t\t\t'cvv',\n\t\t\t\t\t\tdata.issuer === 'unknown' || cvvLen <= 0\n\t\t\t\t\t\t\t? defaultStyleCvv\n\t\t\t\t\t\t\t: cvvLooksValid\n\t\t\t\t\t\t\t? validStyleCvv\n\t\t\t\t\t\t\t: invalidStyleCvv\n\t\t\t\t\t);\n\t\t\t\t\tif (cvvError) {\n\t\t\t\t\t\tcvvError.textContent =\n\t\t\t\t\t\t\tcvvLen <= 0\n\t\t\t\t\t\t\t\t? 'CVV is required'\n\t\t\t\t\t\t\t\t: cvvLooksValid\n\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t: 'Invalid CVV';\n\t\t\t\t\t\tcvvError.setAttribute(\n\t\t\t\t\t\t\t'aria-hidden',\n\t\t\t\t\t\t\tcvvError.textContent ? 'false' : 'true'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If both fields are valid, also clear sticky Woo notices\n\t\t\t\t\tif (data.cardNumberIsValid && cvvLooksValid) {\n\t\t\t\t\t\tclearWooNotices();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Update CVV when issuer changes (e.g. 3 -> 4 for Amex)\n\t\t\t\twindow.addIfieldCallback('issuerupdated', function (data) {\n\t\t\t\t\tconst cvvLen =\n\t\t\t\t\t\ttypeof data.cvvLength === 'number' ? data.cvvLength : 0;\n\t\t\t\t\tconst amex = data.issuer === 'amex';\n\t\t\t\t\tconst expectedLen = amex ? 4 : 3;\n\t\t\t\t\tconst cvvLooksValid = cvvLen === expectedLen && data.cvvIsValid;\n\n\t\t\t\t\twindow.setIfieldStyle(\n\t\t\t\t\t\t'cvv',\n\t\t\t\t\t\tdata.issuer === 'unknown' || cvvLen <= 0\n\t\t\t\t\t\t\t? defaultStyleCvv\n\t\t\t\t\t\t\t: cvvLooksValid\n\t\t\t\t\t\t\t? validStyleCvv\n\t\t\t\t\t\t\t: invalidStyleCvv\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t\t// Fallback (older iFields only expose keypress callback)\n\t\t\telse if (window.addIfieldKeyPressCallback && window.setIfieldStyle) {\n\t\t\t\twindow.addIfieldKeyPressCallback(function (data) {\n\t\t\t\t\tupdateCallbackRef.current?.(data);\n\n\t\t\t\t\tconst cardNumberToken = document.querySelector(\n\t\t\t\t\t\t'[data-ifields-id=\"card-number-token\"]'\n\t\t\t\t\t)?.value;\n\t\t\t\t\tconst cvvToken = document.querySelector('[data-ifields-id=\"cvv-token\"]')\n\t\t\t\t\t\t?.value;\n\t\t\t\t\tconst cardNumberError = document.querySelector(\n\t\t\t\t\t\t'[data-ifields-id=\"card-number-error\"]'\n\t\t\t\t\t);\n\t\t\t\t\tconst cvvError = document.querySelector('[data-ifields-id=\"cvv-error\"]');\n\n\t\t\t\t\t// Card\n\t\t\t\t\tif (cardNumberToken || data.cardNumberIsValid) {\n\t\t\t\t\t\twindow.setIfieldStyle('card-number', validStyle);\n\t\t\t\t\t\tif (cardNumberError) cardNumberError.textContent = '';\n\t\t\t\t\t} else if (data.cardNumberLength > 0) {\n\t\t\t\t\t\twindow.setIfieldStyle('card-number', invalidStyle);\n\t\t\t\t\t\tif (cardNumberError)\n\t\t\t\t\t\t\tcardNumberError.textContent = 'Invalid card number';\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.setIfieldStyle('card-number', defaultStyle);\n\t\t\t\t\t\tif (cardNumberError)\n\t\t\t\t\t\t\tcardNumberError.textContent = 'Card Number is required';\n\t\t\t\t\t}\n\n\t\t\t\t\t// CVV\n\t\t\t\t\tif (cvvToken || data.cvvIsValid) {\n\t\t\t\t\t\twindow.setIfieldStyle('cvv', validStyleCvv);\n\t\t\t\t\t\tif (cvvError) cvvError.textContent = '';\n\t\t\t\t\t} else if (data.cvvLength > 0) {\n\t\t\t\t\t\twindow.setIfieldStyle('cvv', invalidStyleCvv);\n\t\t\t\t\t\tif (cvvError) cvvError.textContent = 'Invalid CVV';\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.setIfieldStyle('cvv', defaultStyleCvv);\n\t\t\t\t\t\tif (cvvError) cvvError.textContent = 'CVV is required';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t(cardNumberToken || data.cardNumberIsValid) &&\n\t\t\t\t\t\t(cvvToken || data.cvvIsValid)\n\t\t\t\t\t) {\n\t\t\t\t\t\tclearWooNotices();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tisInitializedRef.current = true;\n\t\t},\n\t\t[]\n\t);\n\n\tconst getTokens = useCallback(() => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (!window.getTokens) {\n\t\t\t\treject(new Error('iFields not initialized'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If tokens are already present, skip re-validation\n\t\t\tconst currentCardTok = document.querySelector(\n\t\t\t\t'[data-ifields-id=\"card-number-token\"]'\n\t\t\t)?.value;\n\t\t\tconst currentCvvTok = document.querySelector('[data-ifields-id=\"cvv-token\"]')\n\t\t\t\t?.value;\n\t\t\tif (currentCardTok && currentCvvTok) {\n\t\t\t\tclearWooNotices();\n\t\t\t\tresolve({\n\t\t\t\t\tcardNumberToken: currentCardTok,\n\t\t\t\t\tcvvToken: currentCvvTok,\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prepare inline error nodes\n\t\t\tconst cardNumberError = document.querySelector(\n\t\t\t\t'[data-ifields-id=\"card-number-error\"]'\n\t\t\t);\n\t\t\tconst cvvError = document.querySelector('[data-ifields-id=\"cvv-error\"]');\n\t\t\tif (cardNumberError) cardNumberError.textContent = '';\n\t\t\tif (cvvError) cvvError.textContent = '';\n\n\t\t\t// Call iFields to tokenize; add our own timeout guard\n\t\t\tlet finished = false;\n\t\t\tconst tid = setTimeout(() => {\n\t\t\t\tif (finished) return;\n\t\t\t\tfinished = true;\n\t\t\t\treject(new Error('Timed out while validating card fields'));\n\t\t\t}, 15000);\n\n\t\t\twindow.getTokens(\n\t\t\t\t() => {\n\t\t\t\t\tif (finished) return;\n\t\t\t\t\tfinished = true;\n\t\t\t\t\tclearTimeout(tid);\n\n\t\t\t\t\tconst cardNumberToken = document.querySelector(\n\t\t\t\t\t\t'[data-ifields-id=\"card-number-token\"]'\n\t\t\t\t\t)?.value;\n\t\t\t\t\tconst cvvToken = document.querySelector(\n\t\t\t\t\t\t'[data-ifields-id=\"cvv-token\"]'\n\t\t\t\t\t)?.value;\n\n\t\t\t\t\t// If either is missing, show \"required\" and focus first\n\t\t\t\t\tif (!cardNumberToken || !cvvToken) {\n\t\t\t\t\t\tif (!cardNumberToken) {\n\t\t\t\t\t\t\tcardNumberError &&\n\t\t\t\t\t\t\t\t(cardNumberError.textContent = 'Card Number is required');\n\t\t\t\t\t\t\twindow.setIfieldStyle &&\n\t\t\t\t\t\t\t\twindow.setIfieldStyle('card-number', {\n\t\t\t\t\t\t\t\t\tborder: '1px solid #d63638',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twindow.focusIfield && window.focusIfield('card-number');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!cvvToken) {\n\t\t\t\t\t\t\tcvvError && (cvvError.textContent = 'CVV is required');\n\t\t\t\t\t\t\twindow.setIfieldStyle &&\n\t\t\t\t\t\t\t\twindow.setIfieldStyle('cvv', {\n\t\t\t\t\t\t\t\t\tborder: '1px solid #d63638',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (cardNumberToken) {\n\t\t\t\t\t\t\t\twindow.focusIfield && window.focusIfield('cvv');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treject(new Error('Please fill in all required fields'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Success: mark valid, clear error text, clear Woo banners\n\t\t\t\t\twindow.setIfieldStyle &&\n\t\t\t\t\t\twindow.setIfieldStyle('card-number', { border: '1px solid #46b450' });\n\t\t\t\t\twindow.setIfieldStyle &&\n\t\t\t\t\t\twindow.setIfieldStyle('cvv', { border: '1px solid #46b450' });\n\n\t\t\t\t\tif (cardNumberError) {\n\t\t\t\t\t\tcardNumberError.textContent = '';\n\t\t\t\t\t\tcardNumberError.setAttribute('aria-hidden', 'true');\n\t\t\t\t\t}\n\t\t\t\t\tif (cvvError) {\n\t\t\t\t\t\tcvvError.textContent = '';\n\t\t\t\t\t\tcvvError.setAttribute('aria-hidden', 'true');\n\t\t\t\t\t}\n\n\t\t\t\t\tclearWooNotices();\n\t\t\t\t\tresolve({ cardNumberToken, cvvToken });\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tif (finished) return;\n\t\t\t\t\tfinished = true;\n\t\t\t\t\tclearTimeout(tid);\n\n\t\t\t\t\t// Conservative messages if the lib did not populate our errors\n\t\t\t\t\tconst cardNumberErrorEl = document.querySelector('[data-ifields-id=\"card-number-error\"]');\n\t\t\t\t\tconst cvvErrorEl = document.querySelector('[data-ifields-id=\"cvv-error\"]');\n\n\t\t\t\t\tif (cardNumberErrorEl && !cardNumberErrorEl.textContent) {\n\t\t\t\t\t\tcardNumberErrorEl.textContent = 'Invalid card number';\n\t\t\t\t\t}\n\t\t\t\t\tif (cvvErrorEl && !cvvErrorEl.textContent) {\n\t\t\t\t\t\tcvvErrorEl.textContent = 'Invalid CVV';\n\t\t\t\t\t}\n\n\t\t\t\t\t// Focus likely-invalid field to help user\n\t\t\t\t\tif (window.focusIfield) {\n\t\t\t\t\t\t// Prefer card first unless we know it's valid\n\t\t\t\t\t\tconst last =\n\t\t\t\t\t\t\twindow.getLastIfieldState && window.getLastIfieldState();\n\t\t\t\t\t\tconst target =\n\t\t\t\t\t\t\tlast && last.cardNumberIsValid ? 'cvv' : 'card-number';\n\t\t\t\t\t\twindow.focusIfield(target);\n\t\t\t\t\t}\n\n\t\t\t\t\treject(new Error(typeof error === 'string' ? error : 'Failed to get tokens'));\n\t\t\t\t},\n\t\t\t\t15000 // native lib timeout\n\t\t\t);\n\t\t});\n\t}, []);\n\n\tconst clearFields = useCallback(() => {\n\t\tif (window.clearIfield) {\n\t\t\twindow.clearIfield('card-number');\n\t\t\twindow.clearIfield('cvv');\n\t\t}\n\t}, []);\n\n\tconst focusField = useCallback((fieldName) => {\n\t\tif (window.focusIfield) {\n\t\t\twindow.focusIfield(fieldName);\n\t\t}\n\t}, []);\n\n\treturn {\n\t\tinitializeIFields,\n\t\tgetTokens,\n\t\tclearFields,\n\t\tfocusField,\n\t};\n};\n\nexport default useCardknoxIFields;","// ============================================\n// File: blocks/src/utils/cardknox-validator.js\n// ============================================\n\n/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Validate card data\n * @param {Object} cardData - Card data to validate\n * @returns {Object} Validation errors\n */\nexport const validateCardData = (cardData) => {\n    const errors = {};\n\n    // Validate expiry month\n    if (!cardData.expiryMonth) {\n        errors.expiry = __('Expiry month is required', 'woocommerce-gateway-cardknox');\n    } else {\n        const month = parseInt(cardData.expiryMonth, 10);\n        if (month < 1 || month > 12) {\n            errors.expiry = __('Invalid expiry month', 'woocommerce-gateway-cardknox');\n        }\n    }\n\n    // Validate expiry year\n    if (!cardData.expiryYear) {\n        errors.expiry = __('Expiry year is required', 'woocommerce-gateway-cardknox');\n    } else {\n        const currentYear = new Date().getFullYear();\n        const year = parseInt(cardData.expiryYear, 10);\n        \n        if (year < currentYear) {\n            errors.expiry = __('Card has expired', 'woocommerce-gateway-cardknox');\n        }\n        \n        // Check if card expires this year but month has passed\n        if (year === currentYear && cardData.expiryMonth) {\n            const currentMonth = new Date().getMonth() + 1;\n            const expMonth = parseInt(cardData.expiryMonth, 10);\n            \n            if (expMonth < currentMonth) {\n                errors.expiry = __('Card has expired', 'woocommerce-gateway-cardknox');\n            }\n        }\n    }\n\n    return errors;\n};\n\n/**\n * Luhn algorithm to validate card number\n * @param {string} cardNumber - Card number to validate\n * @returns {boolean} Is valid\n */\nexport const luhnCheck = (cardNumber) => {\n    const digits = cardNumber.replace(/\\D/g, '');\n    let sum = 0;\n    let isEven = false;\n\n    for (let i = digits.length - 1; i >= 0; i--) {\n        let digit = parseInt(digits[i], 10);\n\n        if (isEven) {\n            digit *= 2;\n            if (digit > 9) {\n                digit -= 9;\n            }\n        }\n\n        sum += digit;\n        isEven = !isEven;\n    }\n\n    return sum % 10 === 0;\n};\n\n/**\n * Get card type from card number\n * @param {string} cardNumber - Card number\n * @returns {string} Card type\n */\nexport const getCardType = (cardNumber) => {\n    const patterns = {\n        visa: /^4/,\n        mastercard: /^5[1-5]/,\n        amex: /^3[47]/,\n        discover: /^6(?:011|5)/,\n        jcb: /^35/,\n        diners: /^3(?:0[0-5]|[68])/,\n    };\n\n    const digits = cardNumber.replace(/\\D/g, '');\n\n    for (const [type, pattern] of Object.entries(patterns)) {\n        if (pattern.test(digits)) {\n            return type;\n        }\n    }\n\n    return 'unknown';\n};\n\n/**\n * Format card number for display\n * @param {string} cardNumber - Card number\n * @returns {string} Formatted card number\n */\nexport const formatCardNumber = (cardNumber) => {\n    const digits = cardNumber.replace(/\\D/g, '');\n    const cardType = getCardType(digits);\n\n    if (cardType === 'amex') {\n        // Format: 4-6-5\n        return digits.replace(/(\\d{4})(\\d{6})(\\d{5})/, '$1 $2 $3').trim();\n    } else {\n        // Format: 4-4-4-4\n        return digits.replace(/(\\d{4})(?=\\d)/g, '$1 ').trim();\n    }\n};\n\n/**\n * Validate CVV based on card type\n * @param {string} cvv - CVV code\n * @param {string} cardType - Type of card\n * @returns {boolean} Is valid\n */\nexport const validateCVV = (cvv, cardType) => {\n    const cvvDigits = cvv.replace(/\\D/g, '');\n    \n    if (cardType === 'amex') {\n        // American Express uses 4-digit CVV\n        return cvvDigits.length === 4;\n    } else {\n        // Other cards use 3-digit CVV\n        return cvvDigits.length === 3;\n    }\n};\n\n/**\n * Mask card number for display\n * @param {string} cardNumber - Card number\n * @returns {string} Masked card number\n */\nexport const maskCardNumber = (cardNumber) => {\n    const digits = cardNumber.replace(/\\D/g, '');\n    const last4 = digits.slice(-4);\n    const masked = digits.slice(0, -4).replace(/\\d/g, 'â€¢');\n    return formatCardNumber(masked + last4);\n};\n\n/**\n * Validate card holder name\n * @param {string} name - Card holder name\n * @returns {boolean} Is valid\n */\nexport const validateCardholderName = (name) => {\n    // Allow letters, spaces, hyphens, and apostrophes\n    const namePattern = /^[a-zA-Z\\s\\-']+$/;\n    return name && name.length >= 2 && namePattern.test(name);\n};\n\n/**\n * Get card issuer name from card type\n * @param {string} cardType - Card type\n * @returns {string} Card issuer name\n */\nexport const getCardIssuerName = (cardType) => {\n    const issuers = {\n        visa: 'Visa',\n        mastercard: 'Mastercard',\n        amex: 'American Express',\n        discover: 'Discover',\n        jcb: 'JCB',\n        diners: 'Diners Club',\n        unknown: 'Unknown',\n    };\n    \n    return issuers[cardType] || issuers.unknown;\n};\n\n/**\n * Check if expiry date is within valid range\n * @param {string} month - Expiry month\n * @param {string} year - Expiry year\n * @returns {Object} Validation result with isValid and message\n */\nexport const validateExpiryDate = (month, year) => {\n    const result = {\n        isValid: true,\n        message: '',\n    };\n\n    if (!month || !year) {\n        result.isValid = false;\n        result.message = __('Expiry date is required', 'woocommerce-gateway-cardknox');\n        return result;\n    }\n\n    const currentDate = new Date();\n    const currentYear = currentDate.getFullYear();\n    const currentMonth = currentDate.getMonth() + 1;\n    const expMonth = parseInt(month, 10);\n    const expYear = parseInt(year, 10);\n\n    // Check if month is valid\n    if (expMonth < 1 || expMonth > 12) {\n        result.isValid = false;\n        result.message = __('Invalid expiry month', 'woocommerce-gateway-cardknox');\n        return result;\n    }\n\n    // Check if card has expired\n    if (expYear < currentYear || (expYear === currentYear && expMonth < currentMonth)) {\n        result.isValid = false;\n        result.message = __('Card has expired', 'woocommerce-gateway-cardknox');\n        return result;\n    }\n\n    // Check if expiry date is too far in the future (more than 20 years)\n    if (expYear > currentYear + 20) {\n        result.isValid = false;\n        result.message = __('Invalid expiry year', 'woocommerce-gateway-cardknox');\n        return result;\n    }\n\n    return result;\n};","/**\n * Payment method constants\n */\nexport const PAYMENT_METHOD_NAME = 'cardknox';\n\n/**\n * iFields configuration\n */\nexport const IFIELDS_VERSION = '2.15.2302.0801';\nexport const IFIELDS_CDN_URL = `https://cdn.cardknox.com/ifields/${IFIELDS_VERSION}/ifields.min.js`;\nexport const IFIELDS_IFRAME_URL = `https://cdn.cardknox.com/ifields/${IFIELDS_VERSION}/ifield.htm`;\n\n/**\n * Card types mapping\n */\nexport const CARD_TYPES = {\n    visa: 'Visa',\n    mastercard: 'Mastercard',\n    amex: 'American Express',\n    discover: 'Discover',\n    jcb: 'JCB',\n    diners: 'Diners Club',\n    unknown: 'Unknown',\n};\n\n/**\n * Card type patterns for detection\n */\nexport const CARD_PATTERNS = {\n    visa: /^4[0-9]{12}(?:[0-9]{3})?$/,\n    mastercard: /^5[1-5][0-9]{14}$/,\n    amex: /^3[47][0-9]{13}$/,\n    discover: /^6(?:011|5[0-9]{2})[0-9]{12}$/,\n    jcb: /^(?:2131|1800|35\\d{3})\\d{11}$/,\n    diners: /^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,\n};\n\n/**\n * Error messages\n */\nexport const ERROR_MESSAGES = {\n    INVALID_CARD: 'Invalid card number',\n    INVALID_CVV: 'Invalid security code',\n    INVALID_EXPIRY: 'Invalid expiry date',\n    CARD_EXPIRED: 'Card has expired',\n    REQUIRED_FIELD: 'This field is required',\n    PROCESSING_ERROR: 'An error occurred while processing your payment',\n    TOKEN_ERROR: 'Unable to tokenize card data',\n    NETWORK_ERROR: 'Network error. Please check your connection and try again',\n    TIMEOUT_ERROR: 'Request timed out. Please try again',\n    INVALID_NAME: 'Please enter a valid cardholder name',\n    SERVER_ERROR: 'Server error. Please try again later',\n    VALIDATION_ERROR: 'Please check your card details and try again',\n};\n\n/**\n * Success messages\n */\nexport const SUCCESS_MESSAGES = {\n    PAYMENT_SUCCESS: 'Payment processed successfully',\n    CARD_SAVED: 'Card saved successfully',\n    CARD_DELETED: 'Card deleted successfully',\n};\n\n/**\n * Field placeholders\n */\nexport const FIELD_PLACEHOLDERS = {\n    CARD_NUMBER: '1234 5678 9012 3456',\n    CVV: 'CVV',\n    CVV_AMEX: 'CVVV',\n    CARD_NAME: 'Name on card',\n    EXPIRY_MONTH: 'MM',\n    EXPIRY_YEAR: 'YYYY',\n};\n\n/**\n * Field labels\n */\nexport const FIELD_LABELS = {\n    CARD_NUMBER: 'Card Number',\n    CVV: 'Security Code',\n    CARD_NAME: 'Cardholder Name',\n    EXPIRY_DATE: 'Expiry Date',\n    EXPIRY_MONTH: 'Month',\n    EXPIRY_YEAR: 'Year',\n    SAVE_CARD: 'Save to account',\n};\n\n/**\n * iFields event types\n */\nexport const IFIELD_EVENTS = {\n    INPUT: 'input',\n    CLICK: 'click',\n    FOCUS: 'focus',\n    BLUR: 'blur',\n    SUBMIT: 'submit',\n    ESCAPE: 'escape',\n    TAB: 'tab',\n    SHIFT_TAB: 'shifttab',\n    ENTER: 'enter',\n    AUTOFILL: 'autofill',\n    UPDATE: 'update',\n};\n\n/**\n * iFields style states\n */\nexport const IFIELD_STYLES = {\n    DEFAULT: {\n        border: '1px solid #ddd',\n        'font-size': '14px',\n        padding: '12px',\n        'border-radius': '4px',\n        width: '100%',\n        height: '48px',\n        'box-sizing': 'border-box',\n        'font-family': '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif',\n        'line-height': '1.4',\n        color: '#32373c',\n        'background-color': '#fff',\n        transition: 'border-color 0.3s ease',\n    },\n    VALID: {\n        border: '1px solid #46b450',\n        'background-color': '#f0f9f0',\n    },\n    INVALID: {\n        border: '1px solid #d63638',\n        'background-color': '#fef5f5',\n    },\n    FOCUSED: {\n        border: '1px solid #007cba',\n        outline: 'none',\n        'box-shadow': '0 0 0 1px #007cba',\n    },\n};\n\n/**\n * Timeout values (in milliseconds)\n */\nexport const TIMEOUTS = {\n    TOKEN_REQUEST: 15000, // 15 seconds\n    API_REQUEST: 30000,   // 30 seconds\n    VALIDATION: 500,      // 500ms debounce for validation\n};\n\n/**\n * Regular expressions for validation\n */\nexport const REGEX = {\n    NUMBERS_ONLY: /^\\d+$/,\n    LETTERS_ONLY: /^[a-zA-Z\\s]+$/,\n    ALPHANUMERIC: /^[a-zA-Z0-9]+$/,\n    EMAIL: /^(?=.{1,320}$)(?=.{1,64}@)[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[A-Za-z0-9](?:[A-Za-z0-9-]{0,61}[A-Za-z0-9])?\\.)+[A-Za-z]{2,63}$/,\n    WHITESPACE: /\\s/g,\n};\n\n/**\n * API endpoints\n */\nexport const API_ENDPOINTS = {\n    PROCESS_PAYMENT: '/wp-json/wc/store/checkout',\n    VALIDATE_CARD: '/wp-json/cardknox/v1/validate',\n    SAVE_CARD: '/wp-json/cardknox/v1/save-card',\n    DELETE_CARD: '/wp-json/cardknox/v1/delete-card',\n};\n\n/**\n * Local storage keys\n */\nexport const STORAGE_KEYS = {\n    LAST_CARD_TYPE: 'cardknox_last_card_type',\n    PREFERRED_SAVE_METHOD: 'cardknox_save_preference',\n};\n\n/**\n * Card number lengths by type\n */\nexport const CARD_NUMBER_LENGTHS = {\n    visa: [13, 16, 19],\n    mastercard: [16],\n    amex: [15],\n    discover: [16, 19],\n    jcb: [16, 17, 18, 19],\n    diners: [14, 15, 16, 17, 18, 19],\n};\n\n/**\n * CVV lengths by card type\n */\nexport const CVV_LENGTHS = {\n    visa: 3,\n    mastercard: 3,\n    amex: 4,\n    discover: 3,\n    jcb: 3,\n    diners: 3,\n};\n\n/**\n * Default configuration\n */\nexport const DEFAULT_CONFIG = {\n    autoFormat: true,\n    autoSubmit: true,\n    enableValidation: true,\n    showCardIcon: true,\n    requireCVV: true,\n    allowSaveCard: true,\n    validateOnBlur: true,\n    maskCardNumber: true,\n    animateOnError: true,\n};","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"React\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * External dependencies - using global WooCommerce objects\n */\nconst { registerPaymentMethod } = window.wc.wcBlocksRegistry;\n\n/**\n * Internal dependencies\n */\nimport CardknoxPaymentMethod from './cardknox-payment-method';\nimport CardknoxApplePayMethod from './cardknox-applepay-method';\n\n// Register the payment method when DOM is ready\nif (registerPaymentMethod) {\n    registerPaymentMethod(CardknoxPaymentMethod);\n    registerPaymentMethod(CardknoxApplePayMethod);\n}"],"names":["ApplePayButton","createElement","settings","window","WCCardknoxApplePayBlocks","merchantId","merchant_identifier","merchantIdentifier","supportsApplePaySync","ApplePaySession","canMakePayments","e","canMakeApplePay","isSecure","isSecureContext","location","protocol","canMakePaymentsWithActiveCard","CardknoxApplePayMethod","name","label","ariaLabel","content","edit","isEditor","canMakePayment","supports","features","__","decodeEntities","CardknoxPaymentForm","PAYMENT_METHOD_NAME","getSettings","wc","wcSettings","getSetting","defaultLabel","title","Content","props","Label","CardknoxPaymentMethod","_settings$supports","showSaveOption","_settings$showSaveOpt","showSavedCards","Array","isArray","savedCards","length","placeOrderButtonLabel","useEffect","jQuery","document","body","trigger","Fragment","id","className","style","minHeight","display","cardLogoUrl","CardknoxIFields","errors","onExpiryChange","ValidationInputError","cardData","validateExpiry","expiryMonth","expiryYear","currentDate","Date","currentYear","getFullYear","currentMonth","getMonth","expMonth","parseInt","expYear","cardContainer","querySelector","cvvContainer","border","color","marginBottom","paddingBottom","margin","width","lineHeight","fontWeight","htmlFor","position","overflow","backgroundColor","height","src","frameBorder","right","top","transform","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","pointerEvents","cardNumber","errorMessage","gap","flex","inputMode","autoComplete","autoCorrect","autoCapitalize","spellCheck","type","placeholder","outline","expiry","borderRadius","padding","boxSizing","fontSize","onChange","value","target","replace","formattedValue","substr","month","year","cvv","useState","useCallback","useRef","SavePaymentCheckbox","useCardknoxIFields","validateCardData","eventRegistration","events","emitResponse","components","setErrors","isValid","setIsValid","saveCard","setSaveCard","selectedToken","setSelectedToken","setCardData","cardNumberToken","cvvToken","renderCountRef","prevGetTokensRef","prevCardDataRef","emitResponseRef","getTokensRef","cardDataRef","saveCardRef","selectedTokenRef","errorsRef","eventRegistrationRef","paymentSubscriptionRef","subscribed","unsubscribe","current","initializeIFields","getTokens","clearFields","focusField","changed","sameRef","role","attemptInit","hasKey","iFieldsKey","hasSDK","setAccount","setIfieldStyle","addIfieldCallback","softwareName","softwareVersion","onUpdate","handleIFieldUpdate","t","setTimeout","clearTimeout","isUnmounted","timeoutId","trySubscribe","registration","onSetup","onPaymentSetup","onProcessing","onPaymentProcessing","paymentEvent","emitRes","selected","card","responseTypes","SUCCESS","meta","paymentMethodData","wc_token","validationErrors","Object","keys","ERROR","message","tokens","cardknox_card_token","cardknox_cvv_token","cardknox_exp_month","cardknox_exp_year","cardknox_save_card","error","data","newErrors","lastActiveField","cardNumberLength","undefined","cardNumberIsValid","cvvLength","cvvIsValid","cardNumberValid","cvvValid","handleExpiryChange","field","prev","handleTokenChange","token","checked","xmlns","viewBox","d","isInitializedRef","updateCallbackRef","clearWooNotices","groups","querySelectorAll","forEach","g","remove","defaultStyle","defaultStyleCvv","validStyle","invalidStyle","validStyleCvv","invalidStyleCvv","enableAutoFormatting","enableEnterKey","cardNumberError","cvvError","cardLen","cvvLen","textContent","setAttribute","amex","issuer","expectedLen","cvvLooksValid","addIfieldKeyPressCallback","Promise","resolve","reject","Error","currentCardTok","currentCvvTok","finished","tid","focusIfield","cardNumberErrorEl","cvvErrorEl","last","getLastIfieldState","clearIfield","fieldName","luhnCheck","digits","sum","isEven","i","digit","getCardType","patterns","visa","mastercard","discover","jcb","diners","pattern","entries","test","formatCardNumber","cardType","trim","validateCVV","cvvDigits","maskCardNumber","last4","slice","masked","validateCardholderName","namePattern","getCardIssuerName","issuers","unknown","validateExpiryDate","result","IFIELDS_VERSION","IFIELDS_CDN_URL","IFIELDS_IFRAME_URL","CARD_TYPES","CARD_PATTERNS","ERROR_MESSAGES","INVALID_CARD","INVALID_CVV","INVALID_EXPIRY","CARD_EXPIRED","REQUIRED_FIELD","PROCESSING_ERROR","TOKEN_ERROR","NETWORK_ERROR","TIMEOUT_ERROR","INVALID_NAME","SERVER_ERROR","VALIDATION_ERROR","SUCCESS_MESSAGES","PAYMENT_SUCCESS","CARD_SAVED","CARD_DELETED","FIELD_PLACEHOLDERS","CARD_NUMBER","CVV","CVV_AMEX","CARD_NAME","EXPIRY_MONTH","EXPIRY_YEAR","FIELD_LABELS","EXPIRY_DATE","SAVE_CARD","IFIELD_EVENTS","INPUT","CLICK","FOCUS","BLUR","SUBMIT","ESCAPE","TAB","SHIFT_TAB","ENTER","AUTOFILL","UPDATE","IFIELD_STYLES","DEFAULT","transition","VALID","INVALID","FOCUSED","TIMEOUTS","TOKEN_REQUEST","API_REQUEST","VALIDATION","REGEX","NUMBERS_ONLY","LETTERS_ONLY","ALPHANUMERIC","EMAIL","WHITESPACE","API_ENDPOINTS","PROCESS_PAYMENT","VALIDATE_CARD","DELETE_CARD","STORAGE_KEYS","LAST_CARD_TYPE","PREFERRED_SAVE_METHOD","CARD_NUMBER_LENGTHS","CVV_LENGTHS","DEFAULT_CONFIG","autoFormat","autoSubmit","enableValidation","showCardIcon","requireCVV","allowSaveCard","validateOnBlur","animateOnError","registerPaymentMethod","wcBlocksRegistry"],"sourceRoot":""}